extends ../layouts/mainLayout.pug

block styles
  link(rel="stylesheet", href="../../css/add-product.css")

block content
  .content-block
    if errorMessage
      .err-message
        p #{errorMessage}

    form.product-form(action=("/admin/".concat(isEdit ? "edit-product" : "add-product")) method="POST")
      .form-control
        input(
          type="hidden" 
          name="_csrf" 
          value=csrfToken
        )

        label(for="input-label") Product Title
        input(
          class=(validationErrors.find(e => e.param === 'title') ? 'invalid' : '')  
          type="text" 
          name="title" 
          id="input-label" 
          value=(isEdit || hasError ? product.title : "")
        )

        label(for="image-url") Image URL
        input(
          class=(validationErrors.find(e => e.param === 'imageUrl') ? 'invalid' : '')  
          type="text" 
          name="imageUrl" 
          id="image-url" 
          value=(isEdit || hasError ? product.imageUrl: "")
        )

        label(for="price") Price
        input(
          class=(validationErrors.find(e => e.param === 'price') ? 'invalid' : '')  
          type="number" 
          name="price" 
          id="price" 
          value=(isEdit || hasError ? product.price: "")
        )

        label(for="description") Description 
        textarea(
          class=(validationErrors.find(e => e.param === 'description') ? 'invalid' : '')  
          name="description" 
          cols="40" 
          rows="8" 
          id="description"
        ) #{isEdit  || hasError ? product.description: ""}
        
      if isEdit 
        input(type="hidden" name="id" value=(product._id))
        

      button.submit-button(type="submit") #{isEdit ? "Edit Product" : "Add Product"}
    